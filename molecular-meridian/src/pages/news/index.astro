---
import { getCollection } from "astro:content";
const posts = (await getCollection("news"))
  .sort((a,b) => +b.data.date - +a.data.date);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RAPDM | News</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <style>
      body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial; background:#0b0f16; color:rgba(255,255,255,.92); }
      a{ color:inherit; text-decoration:none; }
      .container{ width:min(980px, calc(100% - 28px)); margin: 26px auto 60px; }
      .top{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom: 16px; }
      .btn{ display:inline-flex; border-radius:999px; padding:10px 12px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06); }
      .card{ border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.05); border-radius:16px; padding:16px; margin-top:12px; }
      .muted{ color:rgba(255,255,255,.64); font-size:13px; line-height:1.55; margin:6px 0 0; }
      .meta{ color:rgba(255,255,255,.54); font-size:12px; margin-top:10px; }
      h1{ margin:0; font-size:22px; letter-spacing:-0.02em; }
      h2{ margin:0; font-size:14px; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="top">
        <h1>News</h1>
        <a class="btn" href="/">Back</a>
      </div>

      {posts.map((p) => (
        <a href={`/news/${p.slug}`}>
          <div class="card">
            <h2>{p.data.title}</h2>
            {p.data.summary ? <p class="muted">{p.data.summary}</p> : null}
            <div class="meta">
              {p.data.lang.toUpperCase()} Â· {p.data.date.toISOString().slice(0,10)}
            </div>
          </div>
        </a>
      ))}
    </div>
  </body>
</html>
